# ADR 0002: オブジェクトストレージのディレクトリ構造をdoc_id単位にする

## ステータス
- 採用

## コンテキスト
- プリントはPDFとしてアップロードされ、原本と派生成果物（抽出テキスト、OCR結果、メタ情報）を保存する。
- ディレクトリ階層に意味を持たせ、ファイル名は最小限の意味に留めたい。
- 複数ドキュメントが並行して保存されても、再処理や参照が容易である必要がある。

## 決定
- オブジェクトストレージの基準単位は `doc_id` とする。
- `originals` と `meta` はフラットに配置し、`doc_id` をファイル名に含める。
- `extracted` と `ocr` は `doc_id` ディレクトリ配下にページ単位で配置する。
- 原本PDFは `{doc_id}.pdf` とする。
- 例:
  - `originals/{doc_id}.pdf`
  - `extracted/{doc_id}/pages/{page_num}.txt`
  - `ocr/{doc_id}/pages/{page_num}.txt`
  - `meta/{doc_id}.json`

## 影響・結果
- ドキュメント単位で成果物がまとまり、再処理/削除が容易になる。
- ファイル名は `doc_id` に統一され、検索・運用が単純化する。
